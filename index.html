<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Dama Siglo XIX AR</title>

<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

<style>
body {
  margin: 0;
  background: #f2f2f2;
  font-family: Arial, sans-serif;
}

model-viewer {
  width: 100%;
  height: 100vh;
}

.boton-ar {
  position: fixed;
  bottom: 80px;
  left: 50%;
  transform: translateX(-50%);
  padding: 18px 40px;
  font-size: 18px;
  border: none;
  border-radius: 40px;
  background: black;
  color: white;
  cursor: pointer;
  box-shadow: 0 10px 25px rgba(0,0,0,0.25);
}
</style>
</head>

<body>

<!-- VIDEO OCULTO -->
<video 
  id="video" 
  src="dama.mp4" 
  loop 
  muted 
  playsinline 
  autoplay 
  crossorigin="anonymous"
  style="display:none">
</video>

<model-viewer
  id="viewer"
  src="pantalla.glb"
  ar
  ar-modes="scene-viewer quick-look webxr"
  camera-controls
  shadow-intensity="1"
  autoplay>
</model-viewer>

<button class="boton-ar" onclick="activarAR()">
  Ver en tu espacio
</button>

<script>
const viewer = document.getElementById("viewer");
const video = document.getElementById("video");

// Esperar a que el modelo cargue
viewer.addEventListener("load", () => {

  // Esperar a que el video estÃ© listo
  video.addEventListener("loadeddata", async () => {

    try {
      await video.play();

      const texture = await viewer.createTexture(video);

      viewer.model.materials.forEach((material) => {
        material.pbrMetallicRoughness.setBaseColorTexture(texture);
      });

      console.log("Video aplicado correctamente");

    } catch (error) {
      console.error("Error aplicando video:", error);
    }

  });

});

function activarAR() {
  viewer.activateAR();
}
</script>

</body>
</html>
